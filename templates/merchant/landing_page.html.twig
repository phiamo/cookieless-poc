{% extends 'base.html.twig' %}

{% block javascripts %}
    <script src="//cdn.jsdelivr.net/npm/@fingerprintjs/fingerprintjs@2/dist/fingerprint2.min.js"></script>
    <script src="/js/identify.js" async></script>
    <script src="/js/merchant-tracking.js" async></script>
{% endblock %}

{% block title %}Hello Customer!{% endblock %}

{% block body %}
<style>
    .wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>

    <div class="wrapper">
        <p>
        We identified you coming back via http request only:
        </p>
        <table>
            <tr>
                <td>
                    ClientUUI
                </td>
                <td>
                    {{ client.guid }}
                </td>
            </tr>
            <tr>
                <td>
                    ClientsideFingerprint
                </td>
                <td>
                    {{ client.csFingerprint }}
                </td>
            </tr>
            <tr>
                <td>
                    ServerSidefingerprint
                </td>
                <td>
                    {{ client.ssFingerprint }}
                </td>
            </tr>
        </table>
        <p>
        And if we ask our hopefully cached api client id you should be the same: (javascript)
        </p>
        <table>
            <tr>
                <td>
                    ClientUUI
                </td>
                <td class="clientUUID">

                </td>
            </tr>
            <tr>
                <td>
                    ClientsideFingerprint
                </td>
                <td class="clientSideFingerPrint">
                </td>
            </tr>
            <tr>
                <td>
                    ServerSidefingerprint
                </td>
                <td class="serverSideFingerPrint">
                </td>
            </tr>
        </table>
        {% if app.request.query.has('clientSideFingerPrint') %}
            <p>
                <a href="{{ path('app_merchant_landingpage') }}">Load page without tracking</a>
            </p>
        {% endif %}
    </div>
{% endblock %}
